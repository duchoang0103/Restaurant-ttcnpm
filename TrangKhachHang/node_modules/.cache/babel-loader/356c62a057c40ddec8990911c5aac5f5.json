{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\NguyenDucTuan\\\\Desktop\\\\07-frontend-updating-a-post\\\\src\\\\pages\\\\Auth\\\\Signup.js\";\nimport React, { Component, Fragment } from 'react';\nimport { URLserver } from '../../components/TrangKhachHang/constant';\nimport { handleLoginFailed } from '../../components/TrangKhachHang/Alert/Alert';\nimport './Signup.css';\nimport { Redirect } from 'react-router';\n\nvar Signup = /*#__PURE__*/function (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _this.loginAPI = function () {\n      console.log('Login nè...');\n      var formData = new FormData();\n      formData.append('email', _this.state.email);\n      formData.append('password', _this.state.password);\n      var method = 'POST';\n      var url = URLserver + '/auth/login';\n      fetch(url, {\n        method: method,\n        headers: {\n          'Authorization': 'Bearer ' + _this.props.token\n        },\n        body: formData\n      }).then(function (res) {\n        if (res.status !== 200) {\n          console.log('sai đăng nhập');\n          throw new Error('Login Failed.');\n        }\n\n        console.log(res);\n        return res.json();\n      }).then(function (resData) {\n        console.log(resData);\n        console.log(\"set false\");\n\n        _this.setState({\n          alert: false,\n          token: resData.token,\n          userId: resData.userId,\n          redirectHome: true\n        });\n\n        _this.props.getDataLogin(_this.state.token, _this.state.userId); // })\n        // .then(resData => {\n\n\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        var remainingMilliseconds = 60 * 60 * 1000;\n        var expiryDate = new Date(new Date().getTime() + remainingMilliseconds);\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n\n        _this.setAutoLogout(remainingMilliseconds);\n      }).catch(function (err) {\n        console.log(err); // this.setState({\n        //   isAuth: false,\n        //   authLoading: false,\n        //   error: err\n        // });\n\n        _this.catchError();\n      });\n    };\n\n    _this.catchError = function () {\n      console.log('saisss đăng nhập');\n\n      _this.setState({\n        alert: true\n      });\n    };\n\n    _this.showAlert = function () {\n      if (_this.state.alert === true) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          class: \"alert alert-danger\",\n          role: \"alert\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 9\n          }\n        }, \"\\u0110\\u0103ng k\\xFD kh\\xF4ng th\\xE0nh c\\xF4ng.\");\n      }\n    };\n\n    _this.showRedirect = function () {\n      var redirectHome = _this.state.redirectHome;\n\n      if (redirectHome) {\n        _this.setState({\n          redirectHome: false\n        });\n\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    _this.state = {\n      alert: false,\n      token: '',\n      userId: '',\n      redirectHome: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (this.props.logout) {\n        this.props.logoutHandler();\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      console.log(name);\n      console.log(value);\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      // alert('A email was submitted: ' + this.state.email);\n      event.preventDefault();\n      this.loginAPI();\n      var authData = {\n        email: this.state.email,\n        password: this.state.password\n      }; // this.props.loginHandler(event,authData);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }\n      }, this.showRedirect(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-4 form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }\n      }, \"\\u0110\\u0103ng k\\xFD\"), this.showAlert(), /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"exampleInputEmail1\",\n        className: \"form-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 19\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        className: \"form-control\",\n        id: \"exampleInputEmail1\",\n        \"aria-describedby\": \"emailHelp\",\n        onChange: this.handleChange,\n        name: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"emailHelp\",\n        className: \"form-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 19\n        }\n      }, \"Nh\\u1EADp v\\xE0o email.\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"exampleInputPassword1\",\n        className: \"form-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 19\n        }\n      }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"exampleInputPassword1\",\n        onChange: this.handleChange,\n        name: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"emailHelp\",\n        className: \"form-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }, \"Nh\\u1EADp v\\xE0o password.\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"exampleInputPassword1\",\n        className: \"form-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 19\n        }\n      }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        id: \"exampleInputPassword1\",\n        onChange: this.handleChange,\n        name: \"con_password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"emailHelp\",\n        className: \"form-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 19\n        }\n      }, \"Confirm password.\")), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        class: \"genric-btn btn-block primary large login_button\",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, \"SIGN UP\"))))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/NguyenDucTuan/Desktop/07-frontend-updating-a-post/src/pages/Auth/Signup.js"],"names":["React","Component","Fragment","URLserver","handleLoginFailed","Redirect","Signup","props","loginAPI","console","log","formData","FormData","append","state","email","password","method","url","fetch","headers","token","body","then","res","status","Error","json","resData","setState","alert","userId","redirectHome","getDataLogin","localStorage","setItem","remainingMilliseconds","expiryDate","Date","getTime","toISOString","setAutoLogout","catch","err","catchError","showAlert","showRedirect","handleChange","bind","handleSubmit","logout","logoutHandler","event","target","value","name","preventDefault","authData","Login"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,0CAA1B;AACA,SAASC,iBAAT,QAAkC,6CAAlC;AAEA,OAAO,cAAP;AACA,SAASC,QAAT,QAAyB,cAAzB;;IAEMC,M;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;;AADiB,UAwCnBC,QAxCmB,GAwCR,YAAM;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AAEA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyB,MAAKC,KAAL,CAAWC,KAApC;AACAJ,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,MAAKC,KAAL,CAAWE,QAAvC;AAEA,UAAIC,MAAM,GAAG,MAAb;AACA,UAAIC,GAAG,GAAGf,SAAS,GAAG,aAAtB;AAEAgB,MAAAA,KAAK,CAACD,GAAD,EAAM;AACTD,QAAAA,MAAM,EAAEA,MADC;AAETG,QAAAA,OAAO,EAAE;AAAE,2BAAiB,YAAY,MAAKb,KAAL,CAAWc;AAA1C,SAFA;AAGTC,QAAAA,IAAI,EAAEX;AAHG,OAAN,CAAL,CAKGY,IALH,CAKQ,UAAAC,GAAG,EAAI;AACX,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBhB,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,gBAAM,IAAIgB,KAAJ,CAAU,eAAV,CAAN;AACD;;AACDjB,QAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ;AACA,eAAOA,GAAG,CAACG,IAAJ,EAAP;AACD,OAZH,EAaGJ,IAbH,CAaQ,UAAAK,OAAO,EAAI;AACfnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AACA,cAAKmB,QAAL,CAAc;AACZC,UAAAA,KAAK,EAAE,KADK;AAEZT,UAAAA,KAAK,EAAEO,OAAO,CAACP,KAFH;AAGZU,UAAAA,MAAM,EAAEH,OAAO,CAACG,MAHJ;AAIZC,UAAAA,YAAY,EAAE;AAJF,SAAd;;AAMA,cAAKzB,KAAL,CAAW0B,YAAX,CAAwB,MAAKnB,KAAL,CAAWO,KAAnC,EAA0C,MAAKP,KAAL,CAAWiB,MAArD,EATe,CAUjB;AACA;;;AAEEG,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,OAAO,CAACP,KAAtC;AACAa,QAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BP,OAAO,CAACG,MAAvC;AACA,YAAMK,qBAAqB,GAAG,KAAK,EAAL,GAAU,IAAxC;AACA,YAAMC,UAAU,GAAG,IAAIC,IAAJ,CACjB,IAAIA,IAAJ,GAAWC,OAAX,KAAuBH,qBADN,CAAnB;AAGAF,QAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCE,UAAU,CAACG,WAAX,EAAnC;;AACA,cAAKC,aAAL,CAAmBL,qBAAnB;AAED,OAnCH,EAoCGM,KApCH,CAoCS,UAAAC,GAAG,EAAI;AACZlC,QAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ,EADY,CAEZ;AACA;AACA;AACA;AACA;;AACA,cAAKC,UAAL;AACD,OA5CH;AA6CD,KA/FkB;;AAAA,UAgGnBA,UAhGmB,GAgGN,YAAM;AACjBnC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;;AAEA,YAAKmB,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAd;AACD,KApGkB;;AAAA,UAqGnBe,SArGmB,GAqGP,YAAM;AAChB,UAAI,MAAK/B,KAAL,CAAWgB,KAAX,KAAqB,IAAzB,EAA+B;AAE7B,4BACE;AAAK,UAAA,KAAK,EAAC,oBAAX;AAAgC,UAAA,IAAI,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DADF;AAKD;AAEF,KA/GkB;;AAAA,UAgHnBgB,YAhHmB,GAgHJ,YAAM;AAAA,UACXd,YADW,GACM,MAAKlB,KADX,CACXkB,YADW;;AAGnB,UAAIA,YAAJ,EAAkB;AAChB,cAAKH,QAAL,CAAc;AACZG,UAAAA,YAAY,EAAE;AADF,SAAd;;AAGA,4BAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,KAzHkB;;AAEjB,UAAKlB,KAAL,GAAa;AACXgB,MAAAA,KAAK,EAAE,KADI;AAEXT,MAAAA,KAAK,EAAE,EAFI;AAGXU,MAAAA,MAAM,EAAE,EAHG;AAIXC,MAAAA,YAAY,EAAE;AAJH,KAAb;AAOA,UAAKe,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AAViB;AAWlB;;;;yCACoB;AACnB,UAAG,KAAKzC,KAAL,CAAW2C,MAAd,EAAqB;AACnB,aAAK3C,KAAL,CAAW4C,aAAX;AACD;AACF;;;iCAEYC,K,EAAO;AAClB,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMC,KAAK,GAAGD,MAAM,CAACC,KAArB;AACA,UAAMC,IAAI,GAAGF,MAAM,CAACE,IAApB;AACA9C,MAAAA,OAAO,CAACC,GAAR,CAAY6C,IAAZ;AACA9C,MAAAA,OAAO,CAACC,GAAR,CAAY4C,KAAZ;AAEA,WAAKzB,QAAL,qBACG0B,IADH,EACUD,KADV;AAGD;;;iCAEYF,K,EAAO;AAClB;AACAA,MAAAA,KAAK,CAACI,cAAN;AACA,WAAKhD,QAAL;AACA,UAAMiD,QAAQ,GAAG;AACf1C,QAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KADH;AAEfC,QAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE;AAFN,OAAjB,CAJkB,CAQlB;AACD;;;6BAqFQ;AACP,0BACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK8B,YAAL,EADH,eAEE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAGE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEG,KAAKD,SAAL,EAFH,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,OAAO,EAAC,oBAAf;AAAoC,QAAA,SAAS,EAAC,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,SAAS,EAAC,cAA9B;AAA6C,QAAA,EAAE,EAAC,oBAAhD;AAAqE,4BAAiB,WAAtF;AAAkG,QAAA,QAAQ,EAAE,KAAKE,YAAjH;AAA+H,QAAA,IAAI,EAAC,OAApI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAGE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAHF,CADF,eAME;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,OAAO,EAAC,uBAAf;AAAuC,QAAA,SAAS,EAAC,YAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,SAAS,EAAC,cAAjC;AAAgD,QAAA,EAAE,EAAC,uBAAnD;AAA2E,QAAA,QAAQ,EAAE,KAAKA,YAA1F;AAAwG,QAAA,IAAI,EAAC,UAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAGE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAHF,CANF,eAWE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,OAAO,EAAC,uBAAf;AAAuC,QAAA,SAAS,EAAC,YAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,SAAS,EAAC,cAAjC;AAAgD,QAAA,EAAE,EAAC,uBAAnD;AAA2E,QAAA,QAAQ,EAAE,KAAKA,YAA1F;AAAwG,QAAA,IAAI,EAAC,cAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAGE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAHF,CAXF,eAkBE;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,KAAK,EAAC,iDAAlB;AAAoE,QAAA,OAAO,EAAE,KAAKE,YAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAlBF,CAHF,CAHF,CADF,CAFF,CADF;AAoCD;;;;EAlKkBhD,S;;AAqKrB,eAAeyD,KAAf","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { URLserver } from '../../components/TrangKhachHang/constant';\nimport { handleLoginFailed } from '../../components/TrangKhachHang/Alert/Alert';\n\nimport './Signup.css'\nimport { Redirect } from 'react-router';\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      alert: false,\n      token: '',\n      userId: '',\n      redirectHome: false\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  componentWillMount() {\n    if(this.props.logout){\n      this.props.logoutHandler();\n    }\n  }\n  \n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(name);\n    console.log(value);\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(event) {\n    // alert('A email was submitted: ' + this.state.email);\n    event.preventDefault();\n    this.loginAPI();\n    const authData = {\n      email: this.state.email,\n      password: this.state.password\n    };\n    // this.props.loginHandler(event,authData);\n  }\n  loginAPI = () => {\n    console.log('Login nè...');\n\n    const formData = new FormData();\n    formData.append('email', this.state.email);\n    formData.append('password', this.state.password);\n\n    let method = 'POST';\n    let url = URLserver + '/auth/login';\n\n    fetch(url, {\n      method: method,\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\n      body: formData\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          console.log('sai đăng nhập');\n          throw new Error('Login Failed.');\n        }\n        console.log(res);\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        console.log(\"set false\");\n        this.setState({\n          alert: false,\n          token: resData.token,\n          userId: resData.userId,\n          redirectHome: true\n        })\n        this.props.getDataLogin(this.state.token, this.state.userId);\n      // })\n      // .then(resData => {\n        \n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(\n          new Date().getTime() + remainingMilliseconds\n        );\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n        \n      })\n      .catch(err => {\n        console.log(err);\n        // this.setState({\n        //   isAuth: false,\n        //   authLoading: false,\n        //   error: err\n        // });\n        this.catchError();\n      });\n  };\n  catchError = () => {\n    console.log('saisss đăng nhập');\n\n    this.setState({ alert: true })\n  }\n  showAlert = () => {\n    if (this.state.alert === true) {\n\n      return (\n        <div class=\"alert alert-danger\" role=\"alert\">\n          Đăng ký không thành công.\n        </div>\n      );\n    }\n\n  }\n  showRedirect = () => {\n    const { redirectHome } = this.state;\n\n    if (redirectHome) {\n      this.setState({\n        redirectHome: false\n      })\n      return <Redirect to='/' />;\n    }\n  }\n\n  \n  render() {\n    return (\n      <Fragment>\n        {this.showRedirect()}\n        <div className=\"container mt-5\">\n          <div className=\"row\">\n\n            <div className=\"col-4\"></div>\n            <div className=\"col-4 form\">\n              <h1 >Đăng ký</h1>\n              {this.showAlert()}\n              <form >\n                <div className=\"mb-3\">\n                  <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Email</label>\n                  <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" onChange={this.handleChange} name=\"email\" />\n                  <div id=\"emailHelp\" className=\"form-text\">Nhập vào email.</div>\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Password</label>\n                  <input type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" onChange={this.handleChange} name=\"password\"  />\n                  <div id=\"emailHelp\" className=\"form-text\">Nhập vào password.</div>\n                </div>\n                <div className=\"mb-3\">\n                  <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Confirm Password</label>\n                  <input type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" onChange={this.handleChange} name=\"con_password\"  />\n                  <div id=\"emailHelp\" className=\"form-text\">Confirm password.</div>\n                </div>\n\n                {/* <button class=\"button rounded-1 primary-bg text-white w-100 btn_3 boxed-btn\" type=\"submit\">Login</button> */}\n                <a href=\"#\" class=\"genric-btn btn-block primary large login_button\" onClick={this.handleSubmit}>SIGN UP</a>\n              </form>\n            </div>\n          </div>\n\n        </div>\n      </Fragment>\n    )\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}